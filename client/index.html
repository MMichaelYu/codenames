<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Codenames</title>
</head>

<body>
  <form>
    <div id="gamesetup" style="display:block">
        Room:<br>
        <input type="text" name="roomname" id="roomname"><br>
    </form>
    <button type="button" id="createbutton">Create game</button>
    <button type="button" id="joinbutton">Join game</button>
  </div>
  
    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
    <script src="https://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
    <script src="https://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.6/underscore-min.js"></script>
    <script src="https://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script>


    
    <script>
        var socket = io();
        console.log("socket made");

	

        //TODO: implement roomjoined method
        socket.on('myroomjoined', (data) => {
            //console.log(data.roomID);
            console.log('roomID:' + data.roomID);
            console.log('myplayerID:' + data.players[data.players.length-1].id);
            //send myroomID every time emitting to server
            var myroomID = data.roomID;
            //game starts here
            //put more socket events in this block

        });

        socket.on('connect', function() {
            console.log("socket connected");
          document.getElementById("createbutton").addEventListener("click", function () {
              console.log("buttonpress");
              socket.emit("createGame");
          });
          document.getElementById("joinbutton").addEventListener("click", function () {
              roomname = document.getElementById("roomname").value;
              console.log(roomname);
              socket.emit('joinGame', {roomName: roomname});
          });
          //Implement cannotJoinGame function
        });


        // var Game = Backbone.Model.extend({
        //     start: function (data) {
        //         //POST name and number of players to server to create game
        //         return this.save(data, { url: '/start' });
        //     }
        // });

    </script>
    
    <br>

    <button onclick="startfunc(this)" type="button" id="startbutton">Start game</button>
  <div id="gametable" style="display:none">
   <button id="0" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="1" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="2" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="3" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="4" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <br>
    <button id="5" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="6" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="7" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="8" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="9" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <br>
    <button id="10" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="11" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="12" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="13" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="14" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <br>
    <button id="15" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="16" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="17" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="18" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="19" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <br>
    <button id="20" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="21" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="22" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="23" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    <button id="24" onClick="checkword(this.id)" style="height:100px;width:100px"></button>
    
    <br>
    <br>
    <table border="3" width="150" height="100" style="text-align: center;">
     <tr>
	<td id="25"></td>
	<td id="26"></td>
	<td id="27"></td>
	<td id="28"></td>
	<td id="29"></td>
     </tr>	
     <tr>
	<td id="30"></td>
	<td id="31"></td>
	<td id="32"></td>
	<td id="33"></td>
	<td id="34"></td>	
     </tr>
     <tr>
	<td id="35"></td>
	<td id="36"></td>
	<td id="37"></td>
	<td id="38"></td>
	<td id="39"></td>	
     </tr>
     <tr>
	<td id="40"></td>
	<td id="41"></td>
	<td id="42"></td>
	<td id="43"></td>
	<td id="44"></td>	
     </tr>
     <tr>
	<td id="45"></td>
	<td id="46"></td>
	<td id="47"></td>
	<td id="48"></td>
	<td id="49"></td>	
     </tr>      
    </table>

    <br>
    <p>Enter your clue in the form: word number</p>
    Clue: <input type="text" id="clue">    
    <button onclick="getinputtext()">Submit</button>

  </div>
  
    <script>
      function getinputtext() {
      var fullclue = document.getElementById("clue").value;
      var clueval = fullclue.substr(0, fullclue.length - 1);
      var cluenum = Number(fullclue.substr(fullclue.length - 1));
      document.getElementById("clue").value = "clueval is " + clueval + "cluenum is " + cluenum;
      
      }
      var test = "testtest";
      var colortouse = "#ff00ff";
      var blue ="#0000ff";
      var red = "#f00000";
      var black = "#000000";
      var brown = "#d2b48c";
      var wordarray = ["house", "car", "yellow", "apple", "dice", "sandwich", "tree", "stoplight", "pillow", "horse", "spring", "street", "metal", "chair", "money", "juice", "book", "jacket", "police", "casino", "doctor", "seven", "parrot", "necklace", "sunflower"];
      var revealedarray = [1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0];
      var colorarray = [red, red, blue, red, brown, brown, blue, red, red, blue, blue, brown, blue, brown, red, brown, red, red, blue, blue, blue, black, brown, blue, red];
      for(i = 0; i < 25; i++) {
      document.getElementById(i+25).style.backgroundColor = colorarray[i];
      document.getElementById(i).innerHTML = wordarray[i];
      if(revealedarray[i]) {
      document.getElementById(i).style.backgroundColor = colorarray[i];
      document.getElementById(i).style.fontWeight = "800"; }
      }
      function checkword(word_id) {
	revealedarray[word_id] = 1;
	document.getElementById(word_id).style.backgroundColor = colorarray[word_id];
        document.getElementById(word_id).style.fontWeight = "800";   
		     }
    function startfunc(button) {
      var x = document.getElementById("gametable");
      x.style.display = "block";
      button.style.visibility = "hidden";
      var y = document.getElementById("gamesetup");
      y.style.display = "none";		     
      }
    </script>
    
</body>

</html>
